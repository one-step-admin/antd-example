import{d as F,r as m,a as c,o as k,c as P,w as n,b as i,e as o,u as e,f as p,g as S,m as q,_ as z,h as Z,i as E,j as C,F as U,t as K,k as M,l as B,T as G,n as H,p as X,q as J,s as Q}from"./index-CoOMX7sX.js";import{_ as W,C as Y,i as ee}from"./index-C5I-ERFj.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const te=i("h3",{class:"mb-8 text-xl color-[var(--el-text-color-primary)] font-bold"}," 忘记密码了? 🔒 ",-1),ne={class:"mt-4 flex-center gap-2 text-sm color-[var(--el-text-color-secondary)]"},se=F({name:"ResetPasswordForm",__name:"index",props:{account:{}},emits:["onLogin","onResetPassword"],setup(x,{emit:y}){const A=x,_=y,b=m(!1),u=m(),s=m({account:A.account??localStorage.login_account??"",captcha:"",newPassword:""}),g=m({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"}],newPassword:[{required:!0,trigger:"blur",message:"请输入新密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}]});function h(){var t;q.info("重置密码仅提供界面演示，无实际功能，需开发者自行扩展"),(t=u.value)==null||t.validate().then(()=>{_("onResetPassword",s.value.account)}).catch(()=>{})}return(t,a)=>{const f=z,w=c("AInput"),r=c("AFormItem"),l=c("AButton"),R=c("AInputPassword"),I=c("AForm");return k(),P(I,{ref_key:"formRef",ref:u,model:e(s),rules:e(g),class:"min-h-500px w-full flex-col-stretch-center p-12"},{default:n(()=>[te,i("div",null,[o(r,{name:"account"},{default:n(()=>[o(w,{value:e(s).account,"onUpdate:value":a[0]||(a[0]=d=>e(s).account=d),size:"large",placeholder:"用户名",tabindex:"1"},{prefix:n(()=>[o(f,{name:"ri:user-3-fill"})]),_:1},8,["value"])]),_:1}),o(r,{name:"captcha"},{default:n(()=>[o(w,{value:e(s).captcha,"onUpdate:value":a[1]||(a[1]=d=>e(s).captcha=d),size:"large",placeholder:"验证码",tabindex:"2"},{prefix:n(()=>[o(f,{name:"ic:baseline-verified-user"})]),suffix:n(()=>[o(l,{size:"small"},{default:n(()=>[p(" 发送验证码 ")]),_:1})]),_:1},8,["value"])]),_:1}),o(r,{name:"newPassword"},{default:n(()=>[o(R,{value:e(s).newPassword,"onUpdate:value":a[2]||(a[2]=d=>e(s).newPassword=d),size:"large",placeholder:"新密码",tabindex:"3"},{prefix:n(()=>[o(f,{name:"ri:lock-2-fill"})]),_:1},8,["value"])]),_:1})]),o(l,{loading:e(b),type:"primary",size:"large",style:{width:"100%","margin-top":"20px"},onClick:S(h,["prevent"])},{default:n(()=>[p(" 确认 ")]),_:1},8,["loading"]),i("div",ne,[o(l,{type:"link",onClick:a[3]||(a[3]=d=>_("onLogin",e(s).account))},{default:n(()=>[p(" 去登录 ")]),_:1})])]),_:1},8,["model","rules"])}}}),re=i("h3",{class:"mb-8 text-xl color-[var(--el-text-color-primary)] font-bold"}," 探索从这里开始! 🚀 ",-1),ae={class:"mt-4 flex-center gap-2 text-sm color-[var(--el-text-color-secondary)]"},le=F({name:"RegisterForm",__name:"index",props:{account:{}},emits:["onLogin","onRegister"],setup(x,{emit:y}){const A=x,_=y,b=m(!1),u=m(),s=m({account:A.account??"",captcha:"",password:"",checkPassword:""}),g=m({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],checkPassword:[{required:!0,trigger:"blur",message:"请再次输入密码"},{validator:async(t,a)=>a!==s.value.password?Promise.reject(new Error("两次输入的密码不一致")):Promise.resolve()}]});function h(){var t;q.info("注册模块仅提供界面演示，无实际功能，需开发者自行扩展"),(t=u.value)==null||t.validate().then(()=>{_("onRegister",s.value.account)}).catch(()=>{})}return(t,a)=>{const f=z,w=c("AInput"),r=c("AFormItem"),l=c("AButton"),R=c("AInputPassword"),I=c("AForm");return k(),P(I,{ref_key:"formRef",ref:u,model:e(s),rules:e(g),class:"min-h-500px w-full flex-col-stretch-center p-12"},{default:n(()=>[re,i("div",null,[o(r,{name:"account"},{default:n(()=>[o(w,{value:e(s).account,"onUpdate:value":a[0]||(a[0]=d=>e(s).account=d),size:"large",placeholder:"用户名",tabindex:"1"},{prefix:n(()=>[o(f,{name:"ri:user-3-fill"})]),_:1},8,["value"])]),_:1}),o(r,{name:"captcha"},{default:n(()=>[o(w,{value:e(s).captcha,"onUpdate:value":a[1]||(a[1]=d=>e(s).captcha=d),size:"large",placeholder:"验证码",tabindex:"2"},{prefix:n(()=>[o(f,{name:"ic:baseline-verified-user"})]),suffix:n(()=>[o(l,{size:"small"},{default:n(()=>[p(" 发送验证码 ")]),_:1})]),_:1},8,["value"])]),_:1}),o(r,{name:"password"},{default:n(()=>[o(R,{value:e(s).password,"onUpdate:value":a[2]||(a[2]=d=>e(s).password=d),size:"large",placeholder:"密码",tabindex:"3"},{prefix:n(()=>[o(f,{name:"ri:lock-2-fill"})]),_:1},8,["value"])]),_:1}),o(r,{name:"checkPassword"},{default:n(()=>[o(R,{value:e(s).checkPassword,"onUpdate:value":a[3]||(a[3]=d=>e(s).checkPassword=d),size:"large",placeholder:"确认密码",tabindex:"4"},{prefix:n(()=>[o(f,{name:"ri:lock-2-fill"})]),_:1},8,["value"])]),_:1})]),o(l,{loading:e(b),type:"primary",size:"large",style:{width:"100%","margin-top":"20px"},onClick:S(h,["prevent"])},{default:n(()=>[p(" 注册 ")]),_:1},8,["loading"]),i("div",ae,[p(" 已经有帐号? "),o(l,{type:"link",onClick:a[4]||(a[4]=d=>_("onLogin",e(s).account))},{default:n(()=>[p(" 去登录 ")]),_:1})])]),_:1},8,["model","rules"])}}}),ie={class:"mb-6"},ce={class:"mb-8 text-xl color-[var(--el-text-color-primary)] font-bold"},ue={class:"mb-4 flex-center-between"},de={class:"mt-4 flex-center gap-2 text-sm color-[var(--el-text-color-secondary)]"},me={key:1,class:"flex-col-center"},pe=i("img",{src:"https://s2.loli.net/2024/04/26/GsahtuIZ9XOg5jr.png",class:"h-[250px] w-[250px]"},null,-1),fe=i("div",{class:"mt-2 op-50"}," 请使用微信扫码登录 ",-1),ge=[pe,fe],_e={class:"mt-4 text-center -mb-4"},ve=F({name:"LoginForm",__name:"index",props:{account:{}},emits:["onLogin","onRegister","onResetPassword"],setup(x,{emit:y}){const A=x,_=y,b=Z(),u="One-step-admin 基础版",s=m(!1),g=m("default"),h=m(),t=m({account:A.account??localStorage.login_account??"",password:"",remember:!!localStorage.login_account}),a=m({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}]});function f(){var r;(r=h.value)==null||r.validate().then(()=>{s.value=!0,b.login(t.value).then(()=>{s.value=!1,t.value.remember?localStorage.setItem("login_account",t.value.account):localStorage.removeItem("login_account"),_("onLogin",t.value.account)}).finally(()=>{s.value=!1})})}function w(r){t.value.account=r,t.value.password="123456",f()}return(r,l)=>{const R=W,I=z,d=c("AInput"),L=c("AFormItem"),V=c("AInputPassword"),T=c("ACheckbox"),$=c("AButton"),N=c("ADivider"),j=c("ASpace"),D=c("AForm");return k(),P(D,{ref_key:"formRef",ref:h,model:e(t),rules:e(a),class:"min-h-500px w-full flex-col-stretch-center p-12"},{default:n(()=>[i("div",ie,[o(R,{modelValue:e(g),"onUpdate:modelValue":l[0]||(l[0]=v=>E(g)?g.value=v:null),options:[{label:"账号密码登录",value:"default"},{label:"扫码登录",value:"qrcode"}]},null,8,["modelValue"])]),e(g)==="default"?(k(),C(U,{key:0},[i("h3",ce," 欢迎使用 "+K(e(u))+" ! 👋🏻 ",1),i("div",null,[o(L,{name:"account"},{default:n(()=>[o(d,{value:e(t).account,"onUpdate:value":l[1]||(l[1]=v=>e(t).account=v),size:"large",placeholder:"用户名",tabindex:"1"},{prefix:n(()=>[o(I,{name:"ri:user-3-fill"})]),_:1},8,["value"])]),_:1}),o(L,{name:"password"},{default:n(()=>[o(V,{value:e(t).password,"onUpdate:value":l[2]||(l[2]=v=>e(t).password=v),size:"large",placeholder:"密码",tabindex:"2",onKeyup:M(f,["enter"])},{prefix:n(()=>[o(I,{name:"ri:lock-2-fill"})]),_:1},8,["value"])]),_:1})]),i("div",ue,[o(T,{checked:e(t).remember,"onUpdate:checked":l[3]||(l[3]=v=>e(t).remember=v)},{default:n(()=>[p(" 记住我 ")]),_:1},8,["checked"]),o($,{type:"link",onClick:l[4]||(l[4]=v=>_("onResetPassword",e(t).account))},{default:n(()=>[p(" 忘记密码了? ")]),_:1})]),o($,{loading:e(s),type:"primary",size:"large",style:{width:"100%"},onClick:S(f,["prevent"])},{default:n(()=>[p(" 登录 ")]),_:1},8,["loading"]),i("div",de,[p(" 还没有帐号? "),o($,{type:"link",onClick:l[5]||(l[5]=v=>_("onRegister",e(t).account))},{default:n(()=>[p(" 创建新帐号 ")]),_:1})])],64)):e(g)==="qrcode"?(k(),C("div",me,ge)):B("",!0),i("div",_e,[o(N,null,{default:n(()=>[p("演示账号一键登录")]),_:1}),o(j,null,{default:n(()=>[o($,{type:"primary",size:"small",onClick:l[6]||(l[6]=v=>w("admin"))},{default:n(()=>[p(" admin ")]),_:1}),o($,{size:"small",onClick:l[7]||(l[7]=v=>w("test"))},{default:n(()=>[p(" test ")]),_:1})]),_:1})])]),_:1},8,["model","rules"])}}}),xe=""+new URL("login-banner-ZfMZACb6.png",import.meta.url).href,O=x=>(X("data-v-e76978b8"),x=x(),J(),x),we=O(()=>i("div",{class:"bg-banner"},null,-1)),be={class:"login-box"},ke=O(()=>i("div",{class:"login-banner"},[i("img",{src:ee,class:"absolute left-4 top-4 h-30px rounded ring ring-stone-2 dark-ring-stone-8"}),i("img",{src:xe,class:"banner"})],-1)),ye={class:"login-form flex-col-center"},Ae=F({name:"Login",__name:"login",setup(x){var g;const y=H(),A=Q(),_=m(((g=y.query.redirect)==null?void 0:g.toString())??"/"),b=m(),u=m("login"),s=m();return(h,t)=>{const a=ve,f=le,w=se;return k(),C(U,null,[we,i("div",be,[ke,i("div",ye,[o(G,{name:"fade",mode:"out-in"},{default:n(()=>[e(u)==="login"?(k(),P(a,{key:0,ref_key:"formRef",ref:s,account:e(b),onOnLogin:t[0]||(t[0]=r=>e(A).push(e(_))),onOnRegister:t[1]||(t[1]=r=>{u.value="register",r=r}),onOnResetPassword:t[2]||(t[2]=r=>{u.value="resetPassword",r=r})},null,8,["account"])):e(u)==="register"?(k(),P(f,{key:1,ref_key:"formRef",ref:s,account:e(b),onOnRegister:t[3]||(t[3]=r=>{u.value="login",r=r}),onOnLogin:t[4]||(t[4]=r=>u.value="login")},null,8,["account"])):e(u)==="resetPassword"?(k(),P(w,{key:2,ref_key:"formRef",ref:s,account:e(b),onOnResetPassword:t[5]||(t[5]=r=>{u.value="login",r=r}),onOnLogin:t[6]||(t[6]=r=>u.value="login")},null,8,["account"])):B("",!0)]),_:1})])]),o(Y)],64)}}}),Pe=oe(Ae,[["__scopeId","data-v-e76978b8"]]);export{Pe as default};
